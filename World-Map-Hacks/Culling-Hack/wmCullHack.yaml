---
source_files:
  - ../src/wmCullHack.cpp
  - ../src/wmCullHack.S
  - ../src/wmActorCull.cpp
  - ../src/wmActorCull.S
hooks:
# Cull the map model
  - name: newCullInfo1
    type: branch_insn
    branch_type: b
    src_addr_pal: 0x808E3184
    target_func: 'newCullInfo'

  - name: newCullInfo2
    type: branch_insn
    branch_type: b
    src_addr_pal: 0x808E325C
    target_func: 'newCullInfo2'

  - {name: FixTableOffset1, type: patch, addr_pal: 0x808E31A8, data: '83230004'} # add 0x4
  - {name: FixTableOffset2, type: patch, addr_pal: 0x808E32B0, data: 'C0030000'} # add 0x0

  # Fixes the entire map culling if you have a non-existent bone in the table
  - {name: RemoveRedundantCheck, type: nop_insn, area_pal: 0x808E31E8}
  - {name: SetDummyIndex, type: patch, addr_pal: 0x808E31F8, data: '3800FFFF'} # li r3, -0x1

  # Normally, it skips the entire thing if index[0] < 0, but let's make it just skip to the next one
  - {name: FixCullLoop, type: patch, addr_pal: 0x808e3274, data: '418000E0'}

# Cull World Map actors
  - name: cullAllActors
    type: branch_insn
    branch_type: b
    src_addr_pal: 0x800F2A48
    target_func: 'CullAllWmActors'

# Cull World 7 cloud model
  - name: newWmCloudCullInfo1
    type: branch_insn
    branch_type: b
    src_addr_pal: 0x808CD9E4
    target_func: 'LoadWmCloudCullNames'

  - name: newWmCloudCullInfo2
    type: branch_insn
    branch_type: b
    src_addr_pal: 0x808CDA7C
    target_func: 'LoadWmCloudCullRadius'

  # Removes completely unused float at idx[0] of the table... why does this even exist?
  - {name: RemoveUnusedTableEntry, type: patch, addr_pal: 0x808CDAA8, data: 'C07D0000'} # lfs f3, 0x0(r29)
